// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Belt_Id from "rescript/lib/es6/belt_Id.js";
import * as Belt_Map from "rescript/lib/es6/belt_Map.js";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";

var cmp = Caml_obj.compare;

var IntCmp = Belt_Id.MakeComparable({
      cmp: cmp
    });

var listeners = Belt_Map.make(IntCmp);

chrome.runtime.onConnect.addListener(function (port) {
      var match = port.name;
      if (match === "yt-widgets-content") {
        Belt_Map.set(listeners, port.name, port);
        port.onMessage.addListener(function (portMsg) {
              if (portMsg.tag === "ready") {
                port.postMessage({
                      payload: "test",
                      tag: "testing 123"
                    });
              } else {
                throw {
                      RE_EXN_ID: "Match_failure",
                      _1: [
                        "serviceWorker.res",
                        14,
                        8
                      ],
                      Error: new Error()
                    };
              }
              console.log("msg");
              console.log(portMsg);
            });
      } else {
        throw {
              RE_EXN_ID: "Match_failure",
              _1: [
                "serviceWorker.res",
                10,
                2
              ],
              Error: new Error()
            };
      }
      console.log("connected", port);
    });

export {
  IntCmp ,
  listeners ,
}
/* IntCmp Not a pure module */
