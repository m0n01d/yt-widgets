// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as ReactDom from "react-dom";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";

var ytSelector = "ytcp-video-title";

function make(props) {
  var maybeVideoTitleEl = document.querySelector(ytSelector);
  var view = React.createElement("div", {
        id: "TitleChecker.view"
      }, props.text);
  var maybeVideoTitleInput = Belt_Option.flatMap((maybeVideoTitleEl == null) ? undefined : Caml_option.some(maybeVideoTitleEl), (function (el) {
          return Caml_option.nullable_to_opt(el.querySelector("ytcp-social-suggestion-input"));
        }));
  var moConfig = {
    attributes: true,
    childList: true,
    subtree: true
  };
  var watcher = function (mutationList, observer) {
    var textboxValue = Belt_Option.map(Belt_Option.map(Belt_Array.get(mutationList, 0), (function (mutation) {
                return mutation.target;
              })), (function (el) {
            return el.innerText;
          }));
    if (textboxValue !== undefined) {
      if (textboxValue.length > 60) {
        window.alert("title is too long");
      }
      console.log("the text", textboxValue);
    } else {
      console.log("no");
    }
    console.log("from res", mutationList);
  };
  var observer = new MutationObserver(watcher);
  if (!(maybeVideoTitleEl == null) && maybeVideoTitleInput !== undefined) {
    observer.observe(Caml_option.valFromOption(maybeVideoTitleInput), moConfig);
    return ReactDom.createPortal(view, maybeVideoTitleEl);
  } else {
    return React.createElement(React.Fragment, undefined);
  }
}

export {
  ytSelector ,
  make ,
}
/* react Not a pure module */
